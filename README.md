# **TradeWS**   
### **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è WebSocket-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Binance API**  

**TradeWS** ‚Äî —ç—Ç–æ Django-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ —Å–¥–µ–ª–∫–∞—Ö —Å Binance WebSocket API, –∏—Ö —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ PostgreSQL –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–∞–º —á–µ—Ä–µ–∑ REST API –∏ WebSocket-—Å–µ—Ä–≤–µ—Ä –Ω–∞ Django Channels.  

## **–í–∏–¥–µ–æ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è** 


https://github.com/user-attachments/assets/1be0e383-e473-46fd-b0b8-099cda784cc5



## **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**  
‚úî **–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏** —á–µ—Ä–µ–∑ WebSocket Binance.  
‚úî **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ Redis** –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è.  
‚úî **–ê–≥—Ä–µ–≥–∞—Ü–∏—è –∏ –∑–∞–ø–∏—Å—å –≤ PostgreSQL** –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É —á–µ—Ä–µ–∑ Celery.  
‚úî **REST API** –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏ —Ü–µ–Ω.  
‚úî **WebSocket API** –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.  
‚úî **Unit-—Ç–µ—Å—Ç—ã** –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏.  

---

## **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞**  
**TradeWS** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **—Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å—Ç–µ–∫** Django –∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:  
- **Django + Django REST Framework** ‚Äì –æ—Å–Ω–æ–≤–Ω–æ–µ API.  
- **Django Channels** ‚Äì WebSocket-—Å–µ—Ä–≤–µ—Ä –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤.  
- **Redis** ‚Äì –∫–µ—à –∏ –≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∞–Ω–Ω—ã—Ö.  
- **Celery** ‚Äì —Ñ–æ–Ω–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏ –∞–≥—Ä–µ–≥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö.  
- **PostgreSQL** ‚Äì –æ—Å–Ω–æ–≤–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∞–Ω–Ω—ã—Ö.  
- **pytest + Mock WebSocket** ‚Äì —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ.  

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å?**  
1. **WebSocket-–∫–ª–∏–µ–Ω—Ç** –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ Binance –∏ —Å–ª—É—à–∞–µ—Ç —Å–¥–µ–ª–∫–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.  
2. **–ü–æ–ª—É—á–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ Redis** (—Ç–æ–ª—å–∫–æ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω—é—é –º–∏–Ω—É—Ç—É).  
3. **Celery-–∑–∞–¥–∞—á–∞ —Ä–∞–∑ –≤ –º–∏–Ω—É—Ç—É** –∞–≥—Ä–µ–≥–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤ PostgreSQL.  
4. **REST API –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—É—á–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é** —Ü–µ–Ω –∏–∑ PostgreSQL.  
5. **Django Channels —Ä–∞—Å—Å—ã–ª–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç–∞–º** –ø–æ WebSocket.  

---

## **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞**  

### **1 –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è**  
```sh
git clone https://github.com/Erdaulet0341/TradeWS.git
cd TradeWS
```

### **2 –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è**  
```sh
python -m venv venv
source venv/bin/activate  # –î–ª—è Linux/Mac
venv\Scripts\activate  # –î–ª—è Windows
```

### **3 –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**  
```sh
pip install -r requirements.txt
```

### **4 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env)**  
–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –∏ –¥–æ–±–∞–≤—å—Ç–µ:  
```
SECRET_KEY=your_secret_key
DEBUG=True
ALLOWED_HOSTS=*
DATABASE_URL=postgres://user:password@localhost:5432/tradews
REDIS_URL=redis://localhost:6379/0
```

### **5 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**  
```sh
python manage.py migrate
python manage.py createsuperuser
```

### **6 –ó–∞–ø—É—Å–∫ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤**  
üìå **Redis (–µ—Å–ª–∏ –Ω–µ –∑–∞–ø—É—â–µ–Ω):**  
```sh
redis-server
```

üìå **Celery Worker:**  
```sh
celery -A TradeWS worker --loglevel=info
```

üìå **Celery Beat (–¥–ª—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á):**  
```sh
celery -A TradeWS beat --loglevel=info
```

üìå **Django —Å–µ—Ä–≤–µ—Ä:**  
```sh
python manage.py runserver
```

üìå **WebSocket-—Å–ª—É—à–∞—Ç–µ–ª—å Binance:**  
```sh
python manage.py binance_listener
```

---

## **API-—ç–Ω–¥–ø–æ–∏–Ω—Ç—ã**

### **1 REST API (–ò—Å—Ç–æ—Ä–∏—è —Ü–µ–Ω —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π)**  
üìå **–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∑–∞–ø–∏—Å–µ–π —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π:**  
```sh
GET /api/trades/?limit=10&offset=0
```
üìå **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**  
- `limit` ‚Äì –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10).  
- `offset` ‚Äì —Å–¥–≤–∏–≥ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `offset=10` –ø—Ä–æ–ø—É—Å—Ç–∏—Ç –ø–µ—Ä–≤—ã–µ 10 –∑–∞–ø–∏—Å–µ–π).  

üìå **–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**  
```json
{
    "count": 1000,
    "next": "/api/trades/?limit=10&offset=10",
    "previous": null,
    "results": [
        {
            "id": 1,
            "symbol": "BTCUSDT",
            "open_price": "65000.00",
            "high_price": "65050.00",
            "low_price": "64980.00",
            "close_price": "65010.00",
            "volume": "12.45",
            "timestamp": "2025-03-10T12:00:00Z"
        },
        {
            "id": 2,
            "symbol": "ETHUSDT",
            "open_price": "1919.09",
            "high_price": "1919.38",
            "low_price": "1919.08",
            "close_price": "1919.38",
            "volume": "18.37",
            "timestamp": "2025-03-10T12:01:00Z"
        }
    ]
}
```
üîπ **`count`** ‚Äì –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –≤ –±–∞–∑–µ.  
üîπ **`next`** ‚Äì —Å—Å—ã–ª–∫–∞ –Ω–∞ —Å–ª–µ–¥—É—é—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É (–µ—Å–ª–∏ –µ—Å—Ç—å).  
üîπ **`previous`** ‚Äì —Å—Å—ã–ª–∫–∞ –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É (–µ—Å–ª–∏ –µ—Å—Ç—å).  
üîπ **`results`** ‚Äì —Å–ø–∏—Å–æ–∫ –∑–∞–ø–∏—Å–µ–π —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã.  

---

### **2 WebSocket API (–û–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ü–µ–Ω –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏)**  
üìå **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ WebSocket-—Å–µ—Ä–≤–µ—Ä—É:**  
```sh
ws://localhost:8000/ws/trades/
```
üìå **–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**  
```json
{
    "symbol": "ETHUSDT",
    "open_price": "1919.09",
    "high_price": "1919.38",
    "low_price": "1919.08",
    "close_price": "1919.38",
    "volume": "18.37",
    "timestamp": "2025-03-10T12:02:00Z"
}
```

---

## **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**  
–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤:  
```sh
pytest
python manage.py test
```
üìå –¢–µ—Å—Ç—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç:  
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Binance WebSocket.  
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã Celery.  
- –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å REST API.  
- –†–∞–±–æ—Ç—É WebSocket-—Å–µ—Ä–≤–µ—Ä–∞.  
